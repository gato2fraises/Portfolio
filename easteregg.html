<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini Jeu Plateforme ‚ú® - Dylan Carion</title>
<link rel="stylesheet" href="styles.css">
<script src="i18n.js"></script>
<style>
:root{
  --area-w:700px;
  --area-h:320px;
  --player-size:45px;
  --bg1:#87CEEB;
  --bg2:#98FB98;
  --primary:#667eea;
  --secondary:#764ba2;
  --accent:#00c6fb;
  --success:#00d4aa;
  --warning:#ffcc02;
  --danger:#ff6b6b;
  --white:#ffffff;
  --shadow:rgba(102, 126, 234, 0.2);
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 50%,var(--accent) 100%);
  background-size:400% 400%;
  animation:gradientShift 15s ease infinite;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  position:relative;
  overflow-x:hidden;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Particules magiques */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 3px, transparent 3px),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.08) 2px, transparent 2px),
    radial-gradient(circle at 40% 40%, rgba(0,198,251,0.1) 2.5px, transparent 2.5px);
  background-size: 300px 300px, 200px 200px, 250px 250px;
  animation: float 20s linear infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes float {
  0% { transform: translateX(0px) translateY(0px); }
  33% { transform: translateX(30px) translateY(-30px); }
  66% { transform: translateX(-20px) translateY(-40px); }
  100% { transform: translateX(0px) translateY(0px); }
}

.container{
  width:var(--area-w);
  max-width:100%;
  background:linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(248,249,250,0.95) 100%);
  backdrop-filter:blur(30px);
  border-radius:25px;
  padding:30px;
  box-shadow:0 30px 80px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.3);
  border:1px solid rgba(255,255,255,0.4);
  position:relative;
  z-index:1;
  animation:slideInUp 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(50px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Effet de brillance sur le container */
.container::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
  transform: rotate(45deg);
  animation: shine 8s linear infinite;
  pointer-events: none;
}

@keyframes shine {
  0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
  50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
  100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
}

.header{
  text-align:center;
  margin-bottom:25px;
  position:relative;
  z-index:2;
}

.header h1{
  font-size:2.2rem;
  font-weight:800;
  background:linear-gradient(135deg,var(--primary),var(--secondary),var(--accent));
  -webkit-background-clip:text;
  background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:8px;
  text-shadow:0 4px 20px rgba(0,0,0,0.1);
}

.subtitle {
  color: #6c757d;
  font-size: 1.1rem;
  font-weight: 500;
  font-style: italic;
}

.stats{
  display:flex;
  justify-content:space-between;
  margin-bottom:20px;
  gap:15px;
  position:relative;
  z-index:2;
}

.stat{
  text-align:center;
  font-weight:600;
  background:rgba(102, 126, 234, 0.1);
  padding:15px 20px;
  border-radius:15px;
  flex:1;
  border:1px solid rgba(102, 126, 234, 0.2);
  transition:all 0.3s ease;
}

.stat:hover {
  transform:translateY(-5px);
  box-shadow:0 10px 25px rgba(102, 126, 234, 0.15);
  background:rgba(102, 126, 234, 0.15);
}

.stat-label {
  color:#6c757d;
  font-size:0.9rem;
  margin-bottom:5px;
}

.stat-value {
  color:var(--primary);
  font-size:1.4rem;
  font-weight:800;
}

.game-area{
  position:relative;
  width:100%;
  height:var(--area-h);
  background:linear-gradient(180deg,#87CEEB 0%,#98FB98 100%);
  border-radius:20px;
  overflow:hidden;
  border:3px solid rgba(102, 126, 234, 0.2);
  box-shadow:inset 0 4px 20px rgba(0,0,0,0.1), 0 8px 25px rgba(0,0,0,0.1);
  position:relative;
  z-index:2;
}

/* Nuages d√©coratifs */
.game-area::before {
  content: '‚òÅÔ∏è ‚òÅÔ∏è ‚òÅÔ∏è';
  position: absolute;
  top: 20px;
  left: 50px;
  font-size: 1.5rem;
  opacity: 0.7;
  animation: clouds 15s linear infinite;
}

.game-area::after {
  content: '‚òÅÔ∏è ‚òÅÔ∏è';
  position: absolute;
  top: 40px;
  right: 60px;
  font-size: 1.2rem;
  opacity: 0.6;
  animation: clouds 20s linear infinite reverse;
}

@keyframes clouds {
  0% { transform: translateX(-20px); }
  50% { transform: translateX(20px); }
  100% { transform: translateX(-20px); }
}

.ground{
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:60px;
  background:linear-gradient(135deg,#8B4513 0%,#A0522D 50%,#8B4513 100%);
  border-bottom-left-radius:20px;
  border-bottom-right-radius:20px;
  box-shadow:inset 0 4px 10px rgba(0,0,0,0.2);
}

/* Herbe d√©corative */
.ground::before {
  content: 'üåøüå±üåøüå±üåøüå±üåøüå±üåøüå±üåøüå±üåøüå±üåøüå±';
  position: absolute;
  top: -10px;
  left: 0;
  right: 0;
  font-size: 1.2rem;
  text-align: center;
  opacity: 0.8;
}

.platform{
  position:absolute;
  height:25px;
  background:linear-gradient(135deg,#D2691E 0%,#CD853F 50%,#D2691E 100%);
  border-radius:12px;
  border:2px solid rgba(0,0,0,0.1);
  transform-origin:center;
  box-shadow:0 4px 15px rgba(0,0,0,0.2), inset 0 2px 5px rgba(255,255,255,0.3);
  transition:all 0.3s ease;
}

.platform::before {
  content: 'üü´';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.8rem;
}

.platform.falling{
  background:linear-gradient(135deg,#FF6347 0%,#FF4500 50%,#FF6347 100%);
  animation:shake 0.2s infinite;
}

@keyframes shake {
  0%, 100% { transform: translateX(0px); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

#player{
  position:absolute;
  width:var(--player-size);
  height:var(--player-size);
  border-radius:50%;
  background:linear-gradient(135deg,#FFD700 0%,#FFA500 50%,#FFD700 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  will-change:transform;
  box-shadow:0 8px 20px rgba(0,0,0,0.25), inset 0 2px 10px rgba(255,255,255,0.4);
  border:3px solid rgba(255,255,255,0.6);
  transition:transform 0.1s ease;
}

#player::after{
  content:"üòä";
  font-size:1.5rem;
  transform:translateY(-2px);
  filter:drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

#player:hover {
  transform:scale(1.1);
}

#goal{
  position:absolute;
  width:50px;
  height:50px;
  border-radius:50%;
  right:15px;
  top:20px;
  background:linear-gradient(135deg,#FF69B4 0%,#FF1493 50%,#FF69B4 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 8px 25px rgba(255,20,147,0.3), inset 0 2px 10px rgba(255,255,255,0.4);
  border:3px solid rgba(255,255,255,0.6);
  animation:goalPulse 2s ease-in-out infinite;
}

@keyframes goalPulse {
  0%, 100% { transform: scale(1); box-shadow: 0 8px 25px rgba(255,20,147,0.3); }
  50% { transform: scale(1.1); box-shadow: 0 12px 35px rgba(255,20,147,0.5); }
}

#goal::after {
  content: 'üéÅ';
  font-size: 1.8rem;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

.controls{
  display:flex;
  gap:15px;
  justify-content:center;
  margin-top:25px;
  position:relative;
  z-index:2;
}

.button{
  width:70px;
  height:70px;
  border-radius:50%;
  border:none;
  background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);
  color:#fff;
  font-size:1.5rem;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  box-shadow:0 8px 25px rgba(102, 126, 234, 0.3), inset 0 2px 10px rgba(255,255,255,0.2);
  border:2px solid rgba(255,255,255,0.3);
  position:relative;
  overflow:hidden;
}

.button::before {
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition:left 0.5s;
}

.button:hover::before {
  left:100%;
}

.button:hover{
  transform:translateY(-5px) scale(1.1);
  box-shadow:0 15px 35px rgba(102, 126, 234, 0.4);
}

.button:active{
  transform:translateY(-2px) scale(1.05);
}

#restart{
  display:none;
  padding:12px 25px;
  border-radius:25px;
  background:linear-gradient(135deg,var(--warning) 0%,#e67e22 100%);
  color:#fff;
  border:none;
  margin-left:15px;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  box-shadow:0 8px 25px rgba(243, 156, 18, 0.3);
  font-size:1.1rem;
}

#restart:hover{
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 12px 30px rgba(243, 156, 18, 0.4);
}

.message{
  text-align:center;
  margin-top:20px;
  font-weight:700;
  min-height:1.5em;
  font-size:1.2rem;
  color:var(--primary);
  text-shadow:0 2px 10px rgba(0,0,0,0.1);
  position:relative;
  z-index:2;
}

.message.win {
  color:var(--success);
  animation:celebration 0.6s ease-in-out;
}

.message.lose {
  color:var(--danger);
  animation:shake 0.5s ease-in-out;
}

@keyframes celebration {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.instructions{
  font-size:1rem;
  color:#666;
  text-align:center;
  margin-top:15px;
  padding:15px;
  background:rgba(102, 126, 234, 0.05);
  border-radius:12px;
  border:1px solid rgba(102, 126, 234, 0.1);
  position:relative;
  z-index:2;
}

.instructions::before {
  content: 'üéÆ';
  margin-right: 8px;
}

/* Responsive */
@media(max-width:768px){
  .container{
    padding:20px;
    margin:10px;
  }
  
  .header h1{
    font-size:1.8rem;
  }
  
  .button{
    width:60px;
    height:60px;
    font-size:1.3rem;
  }
  
  .stats{
    flex-direction:column;
    gap:10px;
  }
  
  .stat{
    padding:12px 15px;
  }
}

@media(max-width:520px){
  .button{
    width:55px;
    height:55px;
    font-size:1.2rem;
  }
  
  .controls{
    gap:10px;
  }
  
  .header h1{
    font-size:1.6rem;
  }
}

/* Particules de victoire */
.victory-particle {
  position: fixed;
  width: 10px;
  height: 10px;
  background: linear-gradient(45deg, var(--success), var(--warning));
  border-radius: 50%;
  pointer-events: none;
  z-index: 1000;
  animation: explode 1.5s ease-out forwards;
}

@keyframes explode {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(0) translate(var(--random-x, 100px), var(--random-y, 100px));
    opacity: 0;
  }
}
</style>
</head>
<body>
<!-- Header simple avec s√©lecteur de langue -->
<div class="simple-header">
    <a href="index.html" class="back-btn-simple">‚Üê Retour au portfolio</a>
    <div class="header-lang-container">
        <!-- Le s√©lecteur de langue sera ins√©r√© ici par JavaScript -->
    </div>
</div>

<div class="container" aria-live="polite">
  <div class="header">
    <h1>üéÆ Mini Jeu Plateforme ‚ú®</h1>
    <div class="subtitle">Un petit jeu d√©velopp√© par Dylan Carion</div>
  </div>
  
  <div class="stats">
    <div class="stat">
      <div class="stat-label">Score</div>
      <div class="stat-value" id="score">0</div>
    </div>
    <div class="stat">
      <div class="stat-label">Essai</div>
      <div class="stat-value" id="attempts">1</div>
    </div>
    <div class="stat">
      <div class="stat-label">Temps</div>
      <div class="stat-value" id="time">--:--</div>
    </div>
  </div>

  <div class="game-area" id="gameArea" aria-label="Zone de jeu">
    <div class="ground"></div>

    <div class="platform" id="platform1"></div>
    <div class="platform" id="platform2"></div>
    <div class="platform" id="platform3"></div>

    <div id="player" aria-hidden="true"></div>
    <div id="goal"></div>
  </div>

  <div class="controls">
    <button class="button" id="left" aria-label="Gauche" title="Aller √† gauche">‚¨ÖÔ∏è</button>
    <button class="button" id="jump" aria-label="Saut" title="Sauter">‚¨ÜÔ∏è</button>
    <button class="button" id="right" aria-label="Droite" title="Aller √† droite">‚û°Ô∏è</button>
    <button id="restart">üîÑ Rejouer</button>
  </div>
  
  <div class="message" id="message"></div>
  
  <div class="instructions">
    Utilisez les fl√®ches ‚Üê ‚Üí pour vous d√©placer, ‚Üë ou espace pour sauter. Atteignez le cadeau ! üéÅ
  </div>
</div>

<script>
// Code JavaScript existant avec quelques am√©liorations...

// Constantes (valeurs en unit√©s pixels / secondes)
const PLAYER_SIZE = 45; // Augment√© pour le nouveau design
const GRAVITY = 1800;
const MOVE_ACCEL = 2400;
const MAX_SPEED = 380;
const JUMP_VELOCITY = -620;
const FRICTION_GROUND = 12;
const FRICTION_AIR = 1.5;

const gameArea = document.getElementById('gameArea');
const playerEl = document.getElementById('player');
const platformEls = [
  document.getElementById('platform1'),
  document.getElementById('platform2'),
  document.getElementById('platform3')
];
const goalEl = document.getElementById('goal');
const scoreEl = document.getElementById('score');
const attemptsEl = document.getElementById('attempts');
const timeEl = document.getElementById('time');
const messageEl = document.getElementById('message');
const leftBtn = document.getElementById('left');
const rightBtn = document.getElementById('right');
const jumpBtn = document.getElementById('jump');
const restartBtn = document.getElementById('restart');

let lastTime = 0;
let running = true;
let startTime = null;
let attempts = 1;
let score = 0;

// Player state
const player = {
  x: 20,
  y: 0,
  vx: 0,
  vy: 0,
  w: PLAYER_SIZE,
  h: PLAYER_SIZE,
  onGround: false
};

// Platforms data
let platforms = [
  { x: 120, y: 160, w: 80, h: 25, type: 'normal', el: platformEls[0] },
  { x: 240, y: 120, w: 80, h: 25, type: 'falling', el: platformEls[1], falling:false },
  { x: 360, y: 160, w: 80, h: 25, type: 'normal', el: platformEls[2] }
];

const keys = {};

// Helpers
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function now(){return performance.now();}
function formatTime(s){ if(s<0) return "--:--"; const m=Math.floor(s/60), sec=Math.floor(s%60); return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`; }

// Fonction pour cr√©er des particules de victoire
function createVictoryParticles() {
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'victory-particle';
    particle.style.left = '50%';
    particle.style.top = '50%';
    particle.style.setProperty('--random-x', `${(Math.random() - 0.5) * 400}px`);
    particle.style.setProperty('--random-y', `${(Math.random() - 0.5) * 400}px`);
    particle.style.animationDelay = `${i * 0.1}s`;
    document.body.appendChild(particle);
    
    setTimeout(() => particle.remove(), 1500);
  }
}

// Init sizes + positions
function layout(){
  const groundHeight = 60; // Augment√© pour le nouveau design
  const areaH = gameArea.clientHeight;
  const groundY = areaH - groundHeight;

  player.y = groundY - player.h;
  player.x = 20;
  player.vx = 0; player.vy = 0; player.onGround = true;

  platforms.forEach(p => {
    if (!p.el) return;
    p.el.style.width = p.w + 'px';
    p.el.style.height = p.h + 'px';
    p.el.style.transform = `translate(${p.x}px, ${p.y}px)`;
    p.falling = false;
  });

  render();
}

// Render player & platforms
function render(){
  playerEl.style.transform = `translate3d(${player.x}px, ${player.y}px, 0)`;
  platforms.forEach(p=>{
    if (p.el) p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`;
  });
}

// Collision AABB
function aabb(a,b){
  return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
}

// Game update
function updateFrame(t){
  if (!running) return;
  if (!lastTime) lastTime = t;
  const dt = Math.min((t - lastTime)/1000, 0.05);
  lastTime = t;

  if (startTime) {
    timeEl.textContent = formatTime((performance.now()-startTime)/1000);
  }

  let ax = 0;
  if (keys['ArrowLeft'] || keys['Left']) ax -= MOVE_ACCEL;
  if (keys['ArrowRight'] || keys['Right']) ax += MOVE_ACCEL;

  player.vx += ax * dt;

  if (ax === 0){
    const friction = player.onGround ? FRICTION_GROUND : FRICTION_AIR;
    const sign = Math.sign(player.vx);
    player.vx = Math.abs(player.vx) - friction * 100 * dt;
    if (player.vx < 0) player.vx = 0;
    player.vx *= sign;
  }

  player.vx = clamp(player.vx, -MAX_SPEED, MAX_SPEED);
  player.vy += GRAVITY * dt;

  const prevY = player.y;
  const prevBottom = player.y + player.h;

  player.x += player.vx * dt;
  player.y += player.vy * dt;

  if (player.x < 0){ player.x = 0; player.vx *= -0.15; }
  const maxX = gameArea.clientWidth - player.w;
  if (player.x > maxX){ player.x = maxX; player.vx *= -0.15; }

  const groundY = gameArea.clientHeight - 60; // Ajust√© pour le nouveau design
  player.onGround = false;
  if (player.y + player.h >= groundY){
    player.y = groundY - player.h;
    player.vy = 0;
    player.onGround = true;
  }

  const playerRect = { x: player.x, y: player.y, w: player.w, h: player.h };
  platforms.forEach(p=>{
    const platRect = { x: p.x, y: p.y, w: p.w, h: p.h };
    if (prevBottom <= p.y && player.y + player.h >= p.y &&
        player.x + player.w > p.x + 6 && player.x < p.x + p.w - 6 && player.vy >= 0){
      player.y = p.y - player.h;
      player.vy = 0;
      player.onGround = true;
      if (!p.landed){ p.landed = true; score += 10; scoreEl.textContent = score; }
      if (p.type === 'falling' && !p.falling){
        p.falling = true;
        setTimeout(()=>{ p.el && p.el.classList.add('falling'); }, 150);
        setTimeout(()=>{ if(p.type==='falling'){ p.vy = 90; p.falling = true; } }, 350);
      }
    } else if (aabb(playerRect, platRect)){
      if (player.x + player.w/2 < p.x + p.w/2){
        player.x = p.x - player.w - 1;
      } else {
        player.x = p.x + p.w + 1;
      }
      player.vx *= -0.3;
    }
  });

  platforms.forEach(p=>{
    if (p.falling){
      p.y += (p.vy || 0) * dt;
      if (p.el) p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`;
    }
  });

  const goalRect = { x: gameArea.clientWidth - 65, y: 20, w: 50, h: 50 }; // Ajust√© pour le nouveau design
  if (aabb(playerRect, goalRect)){
    running = false;
    messageEl.textContent = `üéâ Victoire ! Temps ${timeEl.textContent} üéâ`;
    messageEl.className = 'message win';
    document.getElementById('restart').style.display = 'inline-block';
    score += 50; scoreEl.textContent = score;
    
    // Particules de victoire
    createVictoryParticles();
    return;
  }

  if (player.y > gameArea.clientHeight + 200){
    running = false;
    attempts++;
    attemptsEl.textContent = attempts;
    messageEl.textContent = 'üí• Tu as perdu ‚Äî R√©essaie ! üí™';
    messageEl.className = 'message lose';
    restartBtn.style.display = 'inline-block';
    return;
  }

  render();
  requestAnimationFrame(updateFrame);
}

// Controls (code identique mais avec am√©liorations visuelles)
window.addEventListener('keydown', e=>{
  if (['ArrowLeft','ArrowRight','ArrowUp',' '].includes(e.key) || ['Left','Right','Up'].includes(e.code)){
    if (['ArrowLeft','ArrowRight'].includes(e.key)) e.preventDefault();
    keys[e.key] = true;
    if ((e.key === 'ArrowUp' || e.key === ' ') && player.onGround && running){
      player.vy = JUMP_VELOCITY;
      player.onGround = false;
      if(!startTime) startTime = performance.now();
    }
  }
});
window.addEventListener('keyup', e=>{ if (['ArrowLeft','ArrowRight','ArrowUp',' '].includes(e.key)) keys[e.key] = false; });

// Pointer controls
leftBtn.addEventListener('pointerdown', ()=>{ keys['ArrowLeft']=true; if(!startTime) startTime = performance.now(); });
leftBtn.addEventListener('pointerup', ()=>{ keys['ArrowLeft']=false; });
leftBtn.addEventListener('pointercancel', ()=>{ keys['ArrowLeft']=false; });
rightBtn.addEventListener('pointerdown', ()=>{ keys['ArrowRight']=true; if(!startTime) startTime = performance.now(); });
rightBtn.addEventListener('pointerup', ()=>{ keys['ArrowRight']=false; });
rightBtn.addEventListener('pointercancel', ()=>{ keys['ArrowRight']=false; });
jumpBtn.addEventListener('pointerdown', ()=>{
  if (player.onGround && running){ player.vy = JUMP_VELOCITY; player.onGround = false; if(!startTime) startTime = performance.now(); }
});

// Restart
restartBtn.addEventListener('click', resetGame);

// Reset
function resetGame(){
  lastTime = 0;
  running = true;
  startTime = null;
  score = 0; scoreEl.textContent = score;
  messageEl.textContent = '';
  messageEl.className = 'message';
  restartBtn.style.display = 'none';
  platforms.forEach((p, i)=>{
    const init = [{x:120,y:160},{x:240,y:120},{x:360,y:160}][i];
    p.x = init.x; p.y = init.y; p.w = p.w; p.h = p.h; p.type = p.type; p.falling = false; p.vy = 0; p.landed = false;
    if (p.el){ p.el.classList.remove('falling'); p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`; }
  });
  player.x = 20; player.vx = 0; player.vy = 0;
  layout();
  requestAnimationFrame(updateFrame);
}

// Start
window.addEventListener('load', ()=>{
  layout();
  requestAnimationFrame(updateFrame);
});
</script>
</body>
</html>